<!doctype html><html class=no-js lang=es>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Descargar archivos de Telegram - Sherblog</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content="Una forma de descargar archivos de Telegram a nuestra Raspberry sin límite de tamaño">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="http://www.sherblog.pro//images/20210201_telegram_download_daemon_00.jpg">
<meta name=twitter:title content="Descargar archivos de Telegram">
<meta name=twitter:description content="Una forma de descargar archivos de Telegram a nuestra Raspberry sin límite de tamaño">
<meta name=twitter:creator content="@sherblogpro">
<meta name=twitter:site content="sherblog.pro">
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/custom.css>
<link rel="shortcut icon" href=/favicon.ico>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://sherblog.pro/images/20200201_telegram_download_daemon_00.jpg">
<meta name=twitter:title content="Descargar archivos de Telegram">
<meta name=twitter:description content="Una forma de descargar archivos de Telegram a nuestra Raspberry sin límite de tamaño">
<div class=container>
<div class=logo>
<a class=logo__link href=/ title=Sherblog rel=home>
<div class=logo__title>Sherblog</div>
<div class=logo__tagline>Sólo mi forma de hacer las cosas...</div>
</a>
</div>
<nav class=menu>
<button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menú</span>
</button>
<ul class=menu__list>
<li class=menu__item>
<a class=menu__link href=/mis-v%C3%A9rtices-geod%C3%A9sicos/>
<span class=menu__text>Mis vértices geodésicos</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=/post/computing/raspberry/>
<span class=menu__text>Raspberry Pi desde cero</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=/post/android/tasker/>
<span class=menu__text>Tasker</span>
</a>
</li>
</ul>
</nav>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>Descargar archivos de Telegram</h1>
<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-02-01T00:00:00Z>2021-02-01</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/computing/ rel=category>computing</a>
</span>
</div></div>
</header>
<figure class=post__thumbnail>
<img src=/images/20210201_telegram_download_daemon_00.jpg alt="Descargar archivos de Telegram">
</figure><div class="content post__content clearfix">
<p>Hace un tiempo que uso un bot para descargar los archivos grandes de Telegram al NAS tal y como expliqué en este <a href=https://sherblog.pro/archivos-de-telegram-al-nas/>artículo</a>, ahora le doy una vuelta y pongo a trabajar la Raspberry con un servicio que me hace prescindir del bot y sus limitaciones.</p>
<p>La utilidad que me presta <a href=https://t.me/driveuploadbot>@driveuploadbot</a> es impresionante, pero presenta dos problemas. Por un lado sólo es posible descargar tres archivos al día sin pasar por caja y obliga a hacer un pago mensual para evitar el límite, por otro, hay momentos en los que el servicio no funciona correctamente o está caído.</p>
<p>Recientemente, en <a href=https://github.com>Github</a> he dado con una joya llamada <a href=https://github.com/alfem/telegram-download-daemon>telegram-download-daemon</a> y que con sólo tres frases ha sido capaz de cautivarme..</p>
<blockquote>
<p>A Telegram Daemon (not a bot) for file downloading automation. If you have got an Internet connected computer or NAS and you want to automate file downloading from Telegram channels, this daemon is for you. Telegram bots are limited to 20Mb file size downloads. So I wrote this agent or daemon to allow bigger downloads.</p>
</blockquote>
<p>Antes de instalar el servicio necesitamos una identificación y hash de la api de telegram desde la <a href=https://my.telegram.org/apps>API development tools</a>. Pondremos un título y nombre corto a nuestra aplicación y nos guardaremos los siguientes valores:</p>
<ul>
<li>api_id</li>
<li>api_hash</li>
</ul>
<p>![image_01]</p>
<p>Crearemos un canal privado de telegram del que necesitamos saber su identificación.</p>
<blockquote>
<p>La forma más sencilla es añadir como miembro a @username_to_id_bot (Al ser un bot hay que ponerlo como administrador) y enviar al canal el mensaje &ldquo;@username_to_id_bot&rdquo;</p>
</blockquote>
<ul>
<li>canal_id</li>
</ul>
<p>Este servicio lo he puesto a funcionar en la Raspberry de una forma realmente sencilla con la versión 3.7.3 de python siguiendo los siguientes pasos:</p>
<ul>
<li>Crear una carpeta para el servicio y los archivos descargados</li>
<li>Clonamos el repo dentro de la carpeta <code>git clone https://github.com/alfem/telegram-download-daemon.git</code></li>
<li>Instalamos las dependencias <code>pip install -r requirements.txt</code></li>
<li>Lanzamos el servicio</li>
</ul>
<pre tabindex=0><code>python3 telegram-download-daemon/telegram-download-daemon.py --api-id &lt;api_id&gt; --api-hash &lt;api_hash&gt; --channel &lt;canal_id&gt; --dest ~/teledown/files --temp ~/teledown/files
</code></pre><p>Y ya está¡¡¡</p>
<blockquote>
<p>Puesto que mi Raspberry se reinicia todos los días a las cuatro de la mañana lo he incluido en el crontab para que se ejecute en el arranque.</p>
</blockquote>
<p>Desde aquí, montar una unidad de google drive mediante rclone en la carpeta donde se guardan los archivos para que posteriormente el Nas de synology se sincronice es coser y cantar&mldr;</p>
<p>Este ti todos mis scripts los puedes encontrar en <a href=https://github.com/sherlockes/SherloScripts>mi repositorio de GitHub</a>.</p>
</div>
<footer class=post__footer>
<div class="content post__content clearfix">
<h3>Otros de mís artículos que te pueden interesar</h3>
<ul>
<li><a href=/termostato-raspberry/>Termostato Raspberry</a></li>
<li><a href=/clonar-el-disco-de-arranque-de-la-raspberry/>Clonar el disco de arranque de la raspberry</a></li>
<li><a href=/instalar-rclone-en-synology-ds920-/>Instalar rclone en Synology Ds920+</a></li>
<li><a href=/mi-gesti%C3%B3n-de-los-archivos-de-configuraci%C3%B3n/>Mi gestión de los archivos de configuración</a></li>
<li><a href=/montar-carpeta-del-nas-mediante-sshfs/>Montar carpeta del NAS mediante sshfs</a></li>
</ul>
</div>
<div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg>
<ul class=tags__list>
<li class=tags__item>
<a class="tags__link btn" href=/tags/raspberry/ rel=tag>raspberry</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/python/ rel=tag>python</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/bash/ rel=tag>bash</a>
</li>
</ul>
</div>
</footer>
</article>
</main>
<nav class="post-nav flex">
<div class="post-nav__item post-nav__item--prev">
<a class=post-nav__link href=/exif-info-en-bash-con-exiftool/ rel=prev><span class=post-nav__caption>«&#8201;Anterior</span><p class=post-nav__post-title>Exif info en Bash con Exiftool</p></a>
</div>
<div class="post-nav__item post-nav__item--next">
<a class=post-nav__link href=/primeros-pasos-con-nodemcu-y-micropython-en-linux/ rel=next><span class=post-nav__caption>Siguiente&#8201;»</span><p class=post-nav__post-title>Primeros pasos con nodemcu y micropython en linux</p></a>
</div>
</nav>
</div>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2022 Sherblog.
<span class=footer__copyright-credits>Generado con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> y <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span>
</div>
</div>
</footer>
</div>
<script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script></body>
</html>