<!doctype html><html class=no-js lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Sincronizar nubes con rclone - Sherblog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="El método que utilizo para sincronizar dos nubes con mi contenido multimedia por si una de las dos desaparece."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://www.sherblog.pro/images/20200625_rclone_sync_clouds_00.jpg"><meta name=twitter:title content="Sincronizar nubes con rclone"><meta name=twitter:description content="El método que utilizo para sincronizar dos nubes con mi contenido multimedia por si una de las dos desaparece."><meta name=twitter:creator content="@sherblogpro"><meta name=twitter:site content="sherblog.pro"><meta property="og:type" content="article"><meta property="og:locale" content="es_ES"><meta property="og:site_name" content="sherblog.pro"><meta property="og:locale" content="es_ES"><meta property="og:title" content="Sincronizar nubes con rclone"><meta property="og:url" content="https://sherlockes.github.io"><meta property="og:description" content="El método que utilizo para sincronizar dos nubes con mi contenido multimedia por si una de las dos desaparece."><meta property="og:image" content="http://www.sherblog.pro/images/20200625_rclone_sync_clouds_00.jpg"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><meta name=twitter:card content="summary"><meta name=twitter:title content="Sincronizar nubes con rclone"><meta name=twitter:description content="El método que utilizo para sincronizar dos nubes con mi contenido multimedia por si una de las dos desaparece."><div class=container><div class=logo><a class=logo__link href=/ title=Sherblog rel=home><div class=logo__title>Sherblog</div><div class=logo__tagline>Sólo mi forma de hacer las cosas...</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menú</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/post/computing/emacs/><span class=menu__text>Emacs</span></a></li><li class=menu__item><a class=menu__link href=/post/computing/hugo/><span class=menu__text>Hugo</span></a></li><li class=menu__item><a class=menu__link href=/mis-v%C3%A9rtices-geod%C3%A9sicos/><span class=menu__text>Mis vértices geodésicos</span></a></li><li class=menu__item><a class=menu__link href=/post/computing/raspberry/><span class=menu__text>Raspberry Pi desde cero</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Sincronizar nubes con rclone</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-06-03T00:00:00Z>2021-06-03</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/productividad/ rel=category>productividad</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/images/20200625_rclone_sync_clouds_00.jpg alt="Sincronizar nubes con rclone"></figure><div class="content post__content clearfix"><p>Hace un tiempo y gracias a <a href=http://www.andresramos.pro/google-drive-gratis/>Andrés Ramos</a> di con un enlace a una web para crear unidades compartidas de Google Drive con espacio ilimitado y la voy a utilizar para sincronizar la nube en la guardo el contenido multimedia por si alguna de las dos &ldquo;falla&rdquo;.</p><h2 id=creando-una-unidad-compartida>Creando una unidad compartida</h2><p>Gracias a al <a href=https://td.fastio.me/>enlace</a> de Andrés (y que ahora no funciona) era posible crear una unidad compartida de tamaño ilimitado de Google Drive sin más que introducir el nombre que le quiero dar, la cuenta de Google en la que la quiero incluir (No he usado mi cuenta principal sino otra que tengo para estas ocasiones) y seleccionar la universidad de San Francisco (No se como irán las demás opciones). Con solo eso ya tenemos creada una unidad compartida (Para nada privada) con espacio ilimitado.</p><blockquote><p>El rey a muerto&mldr; larga vida al rey. <a href=https://www.pon.workers.dev>https://www.pon.workers.dev</a></p></blockquote><p><img src=/images/20200625_rclone_sync_clouds_01.jpg alt=Imagen_01></p><p>Rápido, barato y sencillo (mientras funcione&mldr;)</p><h2 id=configurando-la-carpeta-en-rclone>Configurando la carpeta en Rclone</h2><p>Ahora toca configurar la carpeta creada en rclone para que tenga acceso a esta unidad compartida.</p><p>Deberemos conocer el identificador de la carpeta compartida para lo cual, entraremos a la msma a través del navegador y copiaremos la última parte de la barra de direcciones.</p><p><img src=/images/20200625_rclone_sync_clouds_02.jpg alt=Imagen_02></p><p>En mi caso el identificador de la carpeta será -> 0AKXXD2qTbW50Uk9PVA</p><p>Ya estamos listos para abrir una terminal y escribir el comando</p><pre tabindex=0><code>rclone config
</code></pre><ul><li>Añadimos una nueva unidad (New remote) - name> nombre</li><li>Selecionamos Google Drive - Storage> drive</li><li>Dejamos en blanco &ldquo;OAuth Client Id&rdquo; - client_id></li><li>Dejamos en blanco &ldquo;OAuth Client Secret&rdquo; - client_secret></li><li>Seleccionamos el acceso completo - scope> 1</li><li>Identificador de la carpeta comartida - root_folder_id> 0AKXXD2qTbW50Uk9PVA</li><li>Dejamos en blanco &ldquo;Service Account Credentials&rdquo; - service_account_file></li><li>No editamos la configuración avanzada - Edit advanced config? > n</li><li>Usamos la configuración automática - Use auto config? > y</li></ul><p>En este momento se abrirá el navegador y no solicitará el acceso a la carpeta para rclone. Lo permitimos</p><p><img src=/images/20200625_rclone_sync_clouds_03.jpg alt=Imagen_03></p><p>Si todo ha ido bien, nos aparecerá una nueva ventana del navegador con el mensaje de éxito y ya podemos volver a la terminal.</p><p><img src=/images/20200625_rclone_sync_clouds_04.jpg alt=Imagen_04></p><ul><li>Configuramos la carpeta como unidad de equipo - Configure this as a team drive? > y</li><li>Seleccionamos la carpeta compartida entre las que nos salen</li><li>Aceptamos la configuración creada - Yes this is OK</li></ul><p>Con esto ya tenemos aceso a la unidad y en la configuración de Rclone nos aparecerá algo como lo siguiente.</p><pre tabindex=0><code>Current remotes:

Name                 Type
====                 ====
nombre               drive

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
e/n/d/r/c/s/q&gt; 
</code></pre><h2 id=encriptando-la-unidad>Encriptando la unidad</h2><p>Puesto que no sabemos quien tiene privilegios para ver o manipular los archivos de esta unidad compartida creada, es imprescindible cifrar el contenido de la misma para lo cual volveremos a la configración de Rclone.</p><pre tabindex=0><code>rclone config
</code></pre><ul><li>Añadimos otra unidad remota > New remote</li><li>La nombramos - name> nombre_en</li><li>Seleccionamos la unidad cifrada - Storage> crypt</li><li>Configuramos como unidad a cifrar la creada anteriormente - remote> nombre:</li><li>Seleccionamos el grado de encriptación de los nombres de archivo - filename_encription> standard</li><li>¿Queremos encriptar los nombres de carpeta? - directory_name_encryption> true</li><li>Generamos un pass aleatorio - Password or pass phrase for encryption> g</li><li>Con 64 bits bastará - Bits> 64</li><li>Aceptamos y guardamos el pass generado - Use this password?> y</li><li>Generamos un segundo pass aleatorio - Password or pass phrase for encryption> g</li><li>Con 64 bits bastará - Bits> 64</li><li>Aceptamos y guardamos el pass generado - Use this password?> y</li><li>No editamos la configuración avanzada - Edit advanced config?> n</li><li>Aceptamos la unidad creada - Yes this is OK</li></ul><p>Ya tenemos creada la unidad compartida encriptada llamada &ldquo;nombre_en&rdquo;</p><pre tabindex=0><code>Current remotes:

Name                 Type
====                 ====
nombre               drive
nombre_en            crypt

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
e/n/d/r/c/s/q&gt;
</code></pre><p>Pedemos ya salir de la configuración de Rclone</p><h2 id=script-de-sincronización>Script de sincronización</h2><p>Con la unidad encriptada creada, es el momento de realizar la sincronización con otra unidad que ya tengamos configurada en Rclone (En mi caso usaré mi directorio de películas en blanco y negro sin derechos de autor &ldquo;Sherloflix&rdquo;). El comando se reduce a una sólo línea de terminal</p><pre tabindex=0><code>rclone sync Sherloflix: nombre_en: --transfers 2 --tpslimit 8 --bwlimit 5M
</code></pre><p>Donde&mldr;</p><ul><li>&ldquo;Sherloflix&rdquo; es el nombre de la unidad que deseo sincronizar</li><li>&ldquo;nombre_en&rdquo; es el nombre de la unidad compartida cifrada que he configurado</li><li>&ldquo;&ndash;transfers 2&rdquo; indica que sólo se transmitirán dos archivos simpultaneamente</li><li>&ldquo;&ndash;tpslimit 8&rdquo; indica el nº máximo de transacciones HTTP por segundo</li><li>&ldquo;&ndash;bwlimit 5M&rdquo; limita a 5 megas por segundo la velocidad de transacción.</li></ul><p>Sólo resta esperar a que se haya realizado la sincronización&mldr;</p><blockquote><p>Muy importante tener el cuenta la limitación de 750Gb por día que impone google al tráfico hacia sus servidores&mldr;</p></blockquote><h2 id=automatizando-la-sincronización>Automatizando la sincronización</h2><p>Pero como el ser humano no está hecho para esperar he optado por automatizar la tarea y encomendársela a la Raspberry (Que para eso está encendida todo el día). Para ello hay que&mldr;</p><ul><li>Crear el archivo &ldquo;cloud_sync.sh&rdquo; donde se incluirá el comando anterior</li><li>Doto al archivo de permisos de ejecución mediante <code>sudo chmod +x cloud_sync.sh</code></li><li>Acceso al CRON de mi usuario de la Raspberry mediante <code>crontab -e</code></li><li>Añado la línea</li></ul></div><footer class=post__footer><div class="content post__content clearfix"><h3>Otros de mís artículos que te pueden interesar</h3><ul><li><a href=/instalar-rclone-en-synology-ds920-/>Instalar rclone en Synology Ds920+</a></li><li><a href=/guardando-y-recuperando-la-configuraci%C3%B3n-de-home-assistant/>Guardando y recuperando la configuración de Home Assistant</a></li><li><a href=/servidor-webdav-de-contenido-remoto-con-rclone/>Servidor Webdav de contenido remoto con Rclone</a></li><li><a href=/men%C3%BA-para-montar-nubes-en-bash/>Menú para montar nubes en Bash</a></li><li><a href=/rclone-en-synology/>Rclone en Synology</a></li></ul></div><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/rclone/ rel=tag>rclone</a></li><li class=tags__item><a class="tags__link btn" href=/tags/google-drive/ rel=tag>google drive</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/synology-broken-sudo/ rel=prev><span class=pager__subtitle>«&#8201;Anterior</span><p class=pager__title>Synology broken sudo</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/esphome-en-home-assistant/ rel=next><span class=pager__subtitle>Siguiente&#8201;»</span><p class=pager__title>ESPHome en Home Assistant</p></a></div></nav><div class="content post__content clearfix"><h3>Comentarios</h3>Atrás quedaron los tiempos de los comentarios en el propio blog. La ley de protección de datos y el spam pudieron con ellos. Ahora puedes plantearme cualquier duda, comentario o sugerencia en <a href=https://twitter.com/sherblogpro>@sherlockes</a> en Twitter o Telegram.</div></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2023 Sherlockes.
<span class=footer__copyright-credits>Generado con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> y <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></br>Esta obra está bajo una <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>licencia de Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional</a>.</br></br><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/><img alt="Licencia de Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></div></div></footer></div><script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script></body></html>