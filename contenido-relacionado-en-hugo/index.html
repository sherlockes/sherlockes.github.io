<!doctype html><html class=no-js lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Contenido relacionado en Hugo - Sherblog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="La forma que he utilizado en Hugo para mostar artículos similares al final del mismo."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://www.sherblog.pro/images/20211214_hugo_related_content_00.jpg"><meta name=twitter:title content="Contenido relacionado en Hugo"><meta name=twitter:description content="La forma que he utilizado en Hugo para mostar artículos similares al final del mismo."><meta name=twitter:creator content="@sherblogpro"><meta name=twitter:site content="sherblog.pro"><meta property="og:type" content="article"><meta property="og:locale" content="es_ES"><meta property="og:site_name" content="sherblog.pro"><meta property="og:locale" content="es_ES"><meta property="og:title" content="Contenido relacionado en Hugo"><meta property="og:url" content="https://sherlockes.github.io"><meta property="og:description" content="La forma que he utilizado en Hugo para mostar artículos similares al final del mismo."><meta property="og:image" content="http://www.sherblog.pro/images/20211214_hugo_related_content_00.jpg"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><meta name=twitter:card content="summary"><meta name=twitter:title content="Contenido relacionado en Hugo"><meta name=twitter:description content="La forma que he utilizado en Hugo para mostar artículos similares al final del mismo."><div class=container><div class=logo><a class=logo__link href=/ title=Sherblog rel=home><div class=logo__title>Sherblog</div><div class=logo__tagline>Sólo mi forma de hacer las cosas...</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menú</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/post/computing/emacs/><span class=menu__text>Emacs</span></a></li><li class="menu__item menu__item--active"><a class=menu__link href=/post/computing/hugo/><span class=menu__text>Hugo</span></a></li><li class=menu__item><a class=menu__link href=/post/computing/home_assistant/><span class=menu__text>Home assistant</span></a></li><li class=menu__item><a class=menu__link href=/mis-v%C3%A9rtices-geod%C3%A9sicos/><span class=menu__text>Mis vértices geodésicos</span></a></li><li class=menu__item><a class=menu__link href=/post/computing/raspberry/><span class=menu__text>Raspberry Pi desde cero</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Contenido relacionado en Hugo</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-12-14T00:00:00Z>2021-12-14</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/hugo/ rel=category>hugo</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/images/20211214_hugo_related_content_00.jpg alt="Contenido relacionado en Hugo"></figure><div class="post__toc toc"><div class=toc__title>Índice</div><div class=toc__menu><nav id=TableOfContents><ul><li><ul><li><a href=#creación-de-la-plantilla>Creación de la plantilla</a></li><li><a href=#inclusión-de-la-plantilla-en-la-página>Inclusión de la plantilla en la página</a></li><li><a href=#configuración-del-contenido>Configuración del contenido</a></li><li><a href=#enlaces-de-interés>Enlaces de interés</a></li></ul></li></ul></nav></div></div><div class="content post__content clearfix"><p>Para que el visitante obtenga una mejor experiencia de tu contenido, es importante mostrarle contenido relaccionado para que siga leyendo a continuación de loa que ya ha consultado. Así lo he implementado en <a href=https://gohugo.io>Hugo</a></p><p>La gestión del <a href=https://gohugo.io/content-management/related/#relatedindices-page-indice1-indice2->contenido relaccionado</a> en <a href=https://gohugo.io>Hugo</a> está claramente expuesta pero para los recien iniciados no resulta obvio de implementar.</p><h3 id=creación-de-la-plantilla>Creación de la plantilla</h3><p>Crearemos en archivo related.html dentro del directorio &ldquo;/layouts/partials&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ $related := .Site.RegularPages.Related . | first 5 }}
</span></span><span style=display:flex><span>{{ with $related }}
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content post__content clearfix&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h3</span>&gt;Otros de mís artículos que te pueden interesar&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>	    {{ range . }}
</span></span><span style=display:flex><span>	    &lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .RelPermalink }}&#34;</span>&gt;{{ .Title }}&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>	    {{ end }}
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><p>En el podemos modificar el número de artículos relaccionados que se van a mostrar, el texto como encabezado de los mismos y el nivel de este encabezado.</p><h3 id=inclusión-de-la-plantilla-en-la-página>Inclusión de la plantilla en la página</h3><p>Hay que modificar el archivo &ldquo;layouts/_default/single.html&rdquo; para incluir en el mismo la plantilla del contenido relaccionado que hemos generado. En caso de que no tengamos este archivo copiaremos el correspondiente dentro de la carpeta de los temas y lo modificaremos.</p><blockquote><p>No hay que editar ningún archivo dentro de la carpeta &ldquo;themes&rdquo; ya que una actualización del propio tema sobreescribiría las modificaciones que hayaos introducido. Para ello hay que hacer una copia del archivo en la carpeta &ldquo;layouts&rdquo; de la raiz del sitio y modificarlo aquí.</p></blockquote><p>Así quedará una vez modificado el archivo &ldquo;single.html&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ define &#34;main&#34; }}
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>main</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main&#34;</span> <span style=color:#a6e22e>role</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main&#34;</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>article</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post&#34;</span>&gt;
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>header</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__header&#34;</span>&gt;
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>h1</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__title&#34;</span>&gt;{{ .Title }}&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>			{{- with .Params.lead }}
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__lead&#34;</span>&gt;{{ . }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>			{{- end }}
</span></span><span style=display:flex><span>			{{ with partial &#34;post_meta.html&#34; . -}}
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__meta meta&#34;</span>&gt;{{ . }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>			{{- end }}
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>		{{- if .Params.thumbnail }}
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>figure</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__thumbnail&#34;</span>&gt;
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Params.thumbnail | relURL }}&#34;</span> <span style=color:#a6e22e>alt</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Title }}&#34;</span>&gt;
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>figure</span>&gt;
</span></span><span style=display:flex><span>		{{- end }}
</span></span><span style=display:flex><span>		{{- partial &#34;post_toc.html&#34; . -}}
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content post__content clearfix&#34;</span>&gt;
</span></span><span style=display:flex><span>			{{ .Content }}
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>		{{- if .Params.tags }}
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>footer</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post__footer&#34;</span>&gt;
</span></span><span style=display:flex><span>            {{ partial &#34;related.html&#34; . }}
</span></span><span style=display:flex><span>			{{ partial &#34;post_tags.html&#34; . }}      
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>footer</span>&gt;
</span></span><span style=display:flex><span>		{{- end }}
</span></span><span style=display:flex><span>	&lt;/<span style=color:#f92672>article</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>{{ partial &#34;authorbox.html&#34; . }}
</span></span><span style=display:flex><span>{{ partial &#34;post_nav.html&#34; . }}
</span></span><span style=display:flex><span>{{ partial &#34;comments.html&#34; . }}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><p>Se puede ver como hemos intruducido el contenido relaccionado mediante <code>{{ partial "related.html" . }}</code> en el pie del artículo justo ante de la barra de tags.</p><h3 id=configuración-del-contenido>Configuración del contenido</h3><p>Llegados a este punto ya es posible regenerar el sitio para comprobar el contenido relaccionado que se ha incluido, si no nos parece adecuado es posible modificar la configuración editando el archivo &ldquo;config.toml&rdquo; incluyendo un nuevo apartado para este contenido relaccionado.</p><p>Asi es como lo tengo dispuesto en este blog:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>related</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>includeNewer</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>threshold</span> = <span style=color:#ae81ff>85</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toLower</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [[<span style=color:#a6e22e>related</span>.<span style=color:#a6e22e>indices</span>]]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;tags&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [[<span style=color:#a6e22e>related</span>.<span style=color:#a6e22e>indices</span>]]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;categories&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [[<span style=color:#a6e22e>related</span>.<span style=color:#a6e22e>indices</span>]]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;date&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>20</span>
</span></span></code></pre></div><p>De esta forma muestra primero el contenido con los mismos tags, despues el de la misma categoría y fimalmente el de una fecha parecida</p><h3 id=enlaces-de-interés>Enlaces de interés</h3><ul><li><a href=https://digitalnotions.net/related-posts-in-hugo/>Digital Notions</a></li><li><a href=https://gohugo.io/content-management/related/>Hugo related content</a></li><li><a href=https://www.regisphilibert.com/blog/2018/04/hugo-optmized-relashionships-with-related-content/>Regis Philibert</a></li></ul></div><footer class=post__footer><div class="content post__content clearfix"><h3>Otros de mís artículos que te pueden interesar</h3><ul><li><a href=/lista-de-art%C3%ADculos-por-categor%C3%ADa-en-hugo/>Lista de artículos por categoría en Hugo</a></li><li><a href=/insertar-comentarios-en-hugo/>Insertar comentarios en Hugo</a></li><li><a href=/mis-v%C3%A9rtices-geod%C3%A9sicos-en-hugo/>Mis vértices geodésicos en Hugo</a></li><li><a href=/insertar-en-twitter-enlaces-a-hugo-con-imagen/>Insertar en Twitter enlaces a Hugo con imagen</a></li><li><a href=/raspberry-configurando-rclone-sin-entorno-gr%C3%A1fico/>Raspberry configurando rclone sin entorno gráfico</a></li></ul></div><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/desarrollo/ rel=tag>desarrollo</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/lista-de-art%C3%ADculos-por-categor%C3%ADa-en-hugo/ rel=prev><span class=pager__subtitle>«&#8201;Anterior</span><p class=pager__title>Lista de artículos por categoría en Hugo</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/mathjax-en-hugo/ rel=next><span class=pager__subtitle>Siguiente&#8201;»</span><p class=pager__title>Mathjax en Hugo</p></a></div></nav><div class="content post__content clearfix"><h3>Comentarios</h3>Atrás quedaron los tiempos de los comentarios en el propio blog. La ley de protección de datos y el spam pudieron con ellos. Ahora puedes plantearme cualquier duda, comentario o sugerencia en <a href=https://emacs.ch/@sherlockes>@sherlockes</a> en Mastodon o Telegram.</div></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2023 Sherlockes.
<span class=footer__copyright-credits>Generado con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> y <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></br>Esta obra está bajo una <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>licencia de Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional</a>.</br></br><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/><img alt="Licencia de Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></div></div></footer></div><script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script></body></html>