<!-- Shortcode Hugo: Embed workflow de n8n en modo lectura -->
<div id="n8n-workflow-{{ .Get "id" | default "1" }}"></div>

<style>
  n8n-demo {
    width: 100%;
    height: 550px; /* puedes ajustarlo */
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    display: block;
    background: #fafafa;
  }
</style>

<script type="module">
  import 'https://cdn.jsdelivr.net/npm/@n8n_io/n8n-demo-component@latest/dist/n8n-demo-component.es.js';

  const containerId = "n8n-workflow-{{ .Get "id" | default "1" }}";
  const container = document.getElementById(containerId);

  fetch('{{ .Get "src" }}')
    .then(response => response.json())
    .then(workflowJson => {
      const viewer = document.createElement('n8n-demo');
      viewer.workflow = workflowJson;
      container.appendChild(viewer);
    })
    .catch(err => {
      console.error("Error cargando workflow n8n:", err);
      container.innerHTML = "<p style='color:red'>No se pudo cargar el workflow.</p>";
    });
</script>
